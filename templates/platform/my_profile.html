{% extends 'platform/common.html' %}
{% load static %}

{% block content %}


<style>
    body {
      text-align: left;
      background-color: #e2e8f0;
    }
    .main-body {
      padding: 15px;
    }

    .custom-navbar {
        background: #3b5d50 !important;
        padding-top: 20px;
        padding-bottom: 20px;
    }
    
    .nav-link {
      color: #4a5568;
    }
    .card {
      box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
    }
    
    .card {
      position: relative;
      display: flex;
      flex-direction: column;
      min-width: 0;
      word-wrap: break-word;
      background-color: #fff;
      background-clip: border-box;
      border: 0 solid rgba(0, 0, 0, 0.125);
      border-radius: 0.25rem;
    }
    
    .card-body {
      flex: 1 1 auto;
      min-height: 1px;
      padding: 1rem;
    }
    
    .gutters-sm {
      margin-right: -8px;
      margin-left: -8px;
    }
    
    .gutters-sm > .col,
    .gutters-sm > [class*='col-'] {
      padding-right: 8px;
      padding-left: 8px;
    }
    .mb-3,
    .my-3 {
      margin-bottom: 1rem !important;
    }
    
    .bg-gray-300 {
      background-color: #e2e8f0;
    }
    .h-100 {
      height: 90% !important;
    }
    .shadow-none {
      box-shadow: none !important;
    }
    .error-message.error {
      color: red;
    }
  </style>

  <div class="container" style="margin-top: 50px;margin-bottom: 30px;">
    <div class="row gutters-sm">
      <div class="col-md-4 d-none d-md-block">
        <div class="card">
          <div class="card-body">
            <nav class="nav flex-column nav-pills nav-gap-y-1">

              <a href="#profile" data-toggle="tab" class="nav-item nav-link has-icon nav-link-faded active">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-user mr-2">
                  <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                  <circle cx="12" cy="7" r="4"></circle>
                </svg> Profile Information
              </a>

              <a href="#manage_address" data-toggle="tab" class="nav-item nav-link has-icon nav-link-faded">
                <svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" viewBox="0 0 56 56"><path fill="currentColor" d="M6.529 50.323c-1.091 0-1.952-.35-2.583-1.052c-.582-.648-.896-1.498-.94-2.55L3 46.454V8.87c0-1.19.315-2.133.946-2.827c.582-.641 1.36-.987 2.335-1.036L6.53 5h26.807c1.077 0 1.93.347 2.562 1.042c.582.64.895 1.493.94 2.557l.005.27v6.59h12.65c.993 0 1.798.3 2.411.897l.15.156c.582.647.896 1.497.94 2.549l.006.267v27.126c0 1.176-.315 2.115-.946 2.817c-.582.647-1.355.996-2.317 1.046l-.245.006zm30.314-3.869c0 .153-.005.302-.016.447h11.538c.411 0 .716-.1.915-.298c.17-.17.267-.424.291-.76l.007-.175V20.115c0-.425-.1-.737-.298-.936c-.17-.17-.419-.267-.745-.291l-.17-.006l-11.522-.001zM32.21 8.423H7.656c-.426 0-.737.099-.936.297c-.17.17-.267.424-.291.76l-.006.176v36.012c0 .425.099.736.297.935c.17.17.424.267.76.291l.176.007l4.867-.001v-6.27c0-.838.174-1.474.52-1.907l.108-.124c.38-.393.945-.607 1.694-.643l.23-.005h9.694c.878 0 1.523.216 1.934.648c.374.393.578.988.612 1.785l.005.245l-.001 6.271h4.89c.411 0 .716-.099.914-.297c.17-.17.268-.424.292-.76l.006-.175V9.656c0-.426-.1-.737-.298-.936c-.198-.198-.503-.297-.914-.297m-8.354 32.313h-7.866c-.412 0-.637.187-.675.562l-.005.118l-.001 5.484h9.226v-5.484c0-.412-.187-.637-.561-.675zm21.067-2.105c.441 0 .68.202.717.607l.005.116v3.316c0 .442-.202.681-.607.718l-.115.005h-3.423c-.429 0-.66-.203-.697-.607l-.004-.116v-3.316c0-.442.196-.681.59-.718l.111-.005zm0-8.12c.441 0 .68.202.717.607l.005.115v3.316c0 .442-.202.681-.607.718l-.115.005h-3.423c-.429 0-.66-.202-.697-.607l-.004-.116v-3.316c0-.442.196-.681.59-.718l.111-.005zm-27.913-1.723c.537 0 .826.248.867.743l.005.129v4.018c0 .536-.248.825-.743.866l-.129.005h-4.145c-.51 0-.785-.247-.824-.742l-.005-.13V29.66c0-.536.235-.825.706-.867l.123-.005zm9.95 0c.536 0 .824.248.866.743l.005.129v4.018c0 .536-.248.825-.743.866l-.129.005h-4.124c-.523 0-.805-.247-.845-.742l-.005-.13V29.66c0-.536.241-.825.724-.867l.126-.005zm17.963-6.399c.441 0 .68.203.717.608l.005.115v3.317c0 .441-.202.68-.607.717l-.115.005h-3.423c-.429 0-.66-.202-.697-.607l-.004-.115v-3.317c0-.441.196-.68.59-.718l.111-.005zm-27.913-2.02c.537 0 .826.248.867.744l.005.128v4.018c0 .537-.248.826-.743.867l-.129.005h-4.145c-.51 0-.785-.248-.824-.743l-.005-.129v-4.018c0-.536.235-.825.706-.866l.123-.005zm9.95 0c.536 0 .824.248.866.744l.005.128v4.018c0 .537-.248.826-.743.867l-.129.005h-4.124c-.523 0-.805-.248-.845-.743l-.005-.129v-4.018c0-.536.241-.825.724-.866l.126-.005zm-9.95-8.417c.537 0 .826.247.867.742l.005.13v4.017c0 .536-.248.825-.743.866l-.129.006h-4.145c-.51 0-.785-.248-.824-.743l-.005-.129v-4.018c0-.536.235-.825.706-.866l.123-.005zm9.95 0c.536 0 .824.247.866.742l.005.13v4.017c0 .536-.248.825-.743.866l-.129.006h-4.124c-.523 0-.805-.248-.845-.743l-.005-.129v-4.018c0-.536.241-.825.724-.866l.126-.005z"/>
                </svg> Manage address
              </a>
              
              <a href="#security" data-toggle="tab" class="nav-item nav-link has-icon nav-link-faded">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-shield mr-2">
                  <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                </svg> Security
              </a>

              <a href="{% url 'logout' %}" class="nav-item nav-link has-icon nav-link-faded">
                <svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2"><path stroke-dasharray="32" stroke-dashoffset="32" d="M12 4H5C4.44772 4 4 4.44772 4 5V19C4 19.5523 4.44772 20 5 20H12"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.4s" values="32;0"/></path><path stroke-dasharray="12" stroke-dashoffset="12" d="M9 12h11.5" opacity="0"><set attributeName="opacity" begin="0.5s" to="1"/><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.5s" dur="0.2s" values="12;0"/></path><path stroke-dasharray="6" stroke-dashoffset="6" d="M20.5 12l-3.5 -3.5M20.5 12l-3.5 3.5" opacity="0"><set attributeName="opacity" begin="0.7s" to="1"/><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.7s" dur="0.2s" values="6;0"/></path></g>
                </svg> Logout
              </a>

            </nav>
          </div>
        </div>
      </div>
      
      <div class="col-md-8">
        <div class="card">
          <div class="card-header border-bottom mb-3 d-flex d-md-none">
            <ul class="nav nav-tabs card-header-tabs nav-gap-x-1" role="tablist">

              <li class="nav-item">
                <a href="#profile" data-toggle="tab" class="nav-link has-icon active">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-user">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                  </svg>
                </a>
              </li>

              <li class="nav-item">
                <a href="#manage_address" data-toggle="tab" class="nav-link has-icon active">
                  <svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" viewBox="0 0 56 56"><path fill="currentColor" d="M6.529 50.323c-1.091 0-1.952-.35-2.583-1.052c-.582-.648-.896-1.498-.94-2.55L3 46.454V8.87c0-1.19.315-2.133.946-2.827c.582-.641 1.36-.987 2.335-1.036L6.53 5h26.807c1.077 0 1.93.347 2.562 1.042c.582.64.895 1.493.94 2.557l.005.27v6.59h12.65c.993 0 1.798.3 2.411.897l.15.156c.582.647.896 1.497.94 2.549l.006.267v27.126c0 1.176-.315 2.115-.946 2.817c-.582.647-1.355.996-2.317 1.046l-.245.006zm30.314-3.869c0 .153-.005.302-.016.447h11.538c.411 0 .716-.1.915-.298c.17-.17.267-.424.291-.76l.007-.175V20.115c0-.425-.1-.737-.298-.936c-.17-.17-.419-.267-.745-.291l-.17-.006l-11.522-.001zM32.21 8.423H7.656c-.426 0-.737.099-.936.297c-.17.17-.267.424-.291.76l-.006.176v36.012c0 .425.099.736.297.935c.17.17.424.267.76.291l.176.007l4.867-.001v-6.27c0-.838.174-1.474.52-1.907l.108-.124c.38-.393.945-.607 1.694-.643l.23-.005h9.694c.878 0 1.523.216 1.934.648c.374.393.578.988.612 1.785l.005.245l-.001 6.271h4.89c.411 0 .716-.099.914-.297c.17-.17.268-.424.292-.76l.006-.175V9.656c0-.426-.1-.737-.298-.936c-.198-.198-.503-.297-.914-.297m-8.354 32.313h-7.866c-.412 0-.637.187-.675.562l-.005.118l-.001 5.484h9.226v-5.484c0-.412-.187-.637-.561-.675zm21.067-2.105c.441 0 .68.202.717.607l.005.116v3.316c0 .442-.202.681-.607.718l-.115.005h-3.423c-.429 0-.66-.203-.697-.607l-.004-.116v-3.316c0-.442.196-.681.59-.718l.111-.005zm0-8.12c.441 0 .68.202.717.607l.005.115v3.316c0 .442-.202.681-.607.718l-.115.005h-3.423c-.429 0-.66-.202-.697-.607l-.004-.116v-3.316c0-.442.196-.681.59-.718l.111-.005zm-27.913-1.723c.537 0 .826.248.867.743l.005.129v4.018c0 .536-.248.825-.743.866l-.129.005h-4.145c-.51 0-.785-.247-.824-.742l-.005-.13V29.66c0-.536.235-.825.706-.867l.123-.005zm9.95 0c.536 0 .824.248.866.743l.005.129v4.018c0 .536-.248.825-.743.866l-.129.005h-4.124c-.523 0-.805-.247-.845-.742l-.005-.13V29.66c0-.536.241-.825.724-.867l.126-.005zm17.963-6.399c.441 0 .68.203.717.608l.005.115v3.317c0 .441-.202.68-.607.717l-.115.005h-3.423c-.429 0-.66-.202-.697-.607l-.004-.115v-3.317c0-.441.196-.68.59-.718l.111-.005zm-27.913-2.02c.537 0 .826.248.867.744l.005.128v4.018c0 .537-.248.826-.743.867l-.129.005h-4.145c-.51 0-.785-.248-.824-.743l-.005-.129v-4.018c0-.536.235-.825.706-.866l.123-.005zm9.95 0c.536 0 .824.248.866.744l.005.128v4.018c0 .537-.248.826-.743.867l-.129.005h-4.124c-.523 0-.805-.248-.845-.743l-.005-.129v-4.018c0-.536.241-.825.724-.866l.126-.005zm-9.95-8.417c.537 0 .826.247.867.742l.005.13v4.017c0 .536-.248.825-.743.866l-.129.006h-4.145c-.51 0-.785-.248-.824-.743l-.005-.129v-4.018c0-.536.235-.825.706-.866l.123-.005zm9.95 0c.536 0 .824.247.866.742l.005.13v4.017c0 .536-.248.825-.743.866l-.129.006h-4.124c-.523 0-.805-.248-.845-.743l-.005-.129v-4.018c0-.536.241-.825.724-.866l.126-.005z"/>
                  </svg>
                </a>
              </li>

              <li class="nav-item">
                <a href="#security" data-toggle="tab" class="nav-link has-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-shield">
                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                  </svg>
                </a>
              </li> 
            </ul>
          </div>

         
          <!--profile info-->
          
          <div class="card-body tab-content">
            <div class="tab-pane active" id="profile">
              <h6>YOUR PROFILE INFORMATION</h6>
              <hr />
              <form id="editDetailsForm" method="POST" action="{% url 'edit_details' %}">
                {% csrf_token %}
                <div class="form-group">
                    <label for="firstName">First Name</label>
                    <input type="text" class="form-control" id="firstName" name="firstname" aria-describedby="firstnameHelp"
                        placeholder="Enter your first name" value="{{data.first_name}}" />
                    <div class="error-message"></div>
                </div>
            
                <div class="form-group">
                    <label for="lastName">Last Name</label>
                    <input type="text" class="form-control" id="lastName" name='lastname' aria-describedby="lastnameHelp"
                        placeholder="Enter your last name" value="{{data.last_name}}" />
                    <div class="error-message"></div>
                </div>
            
                <div class="form-group">
                    <label for="phone">Phone</label>
                    <input type="text" class="form-control" id="phone" name='phone' placeholder="Enter your Phone Number"
                        value="{{data.phone}}" />
                    <div class="error-message"></div>
                </div>
            
                <div class="form-group">
                    <label for="email">Email</label>
                    <input class="form-control" type="email" placeholder="Email" aria-label="Disabled input example"
                        value="{{data.email}}" disabled />
                </div>
                <button type="submit" class="btn btn-primary" style="margin-top: 20px;">Update Changes</button>
            </form>
            </div>

            
            <!--manage address-->
            <div class="tab-pane" id="manage_address">
              <h6>MANAGE ADDRESS</h6>
              <!--Add address-->
              <div>
                <a href="{% url "add_address" %}" data-bs-toggle="modal" data-bs-target="#addAddressModal"><button type="button" class="btn btn-primary">Add address</button></a>
              </div>

              <div class="modal fade" id="addAddressModal" tabindex="-1" aria-labelledby="addAddressModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="addAddressModal">Add Address</h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                      <form id="addAddressForm" method="POST" action="{% url 'add_address' %}">
                        {% csrf_token %}
                        <div class="form-group row">
                          <div class="col-md-6">
                            <label for="fname" class="text-black">First Name <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="fname" name="fname" value="{{ addrs.first_name }}">
                            <div class="error-message"></div>
                          </div>
                          <div class="col-md-6">
                            <label for="lname" class="text-black">Last Name <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="lname" name="lname">
                            <div class="error-message"></div>
                          </div>
                        </div>
                        <div class="form-group row">
                          <div class="col-md-12">
                            <label for="c_address" class="text-black">Address <span class="text-danger">*</span></label>
                            <textarea class="form-control" name="c_address" id="c_address" rows="2" placeholder="Street address"></textarea>
                            <div class="error-message"></div>
                          </div>
                        </div>
                        <div class="form-group row">
                          <div class="col-md-12">
                            <label for="c_city" class="text-black">City <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="c_city" name="city" placeholder="City">
                            <div class="error-message"></div>
                          </div>
                        </div>
                        <div class="form-group row">
                          <div class="col-md-12">
                            <label for="c_landmark" class="text-black">Landmark <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="c_landmark" name="landmark" placeholder="Landmark">
                            <div class="error-message"></div>
                          </div>
                        </div>
                        <div class="form-group row">
                          <div class="col-md-6">
                            <label for="country" class="text-black">Country <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="country" name="country">
                            <div class="error-message"></div>
                          </div>
                          <div class="col-md-6">
                            <label for="state" class="text-black">State <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="state" name="state">
                            <div class="error-message"></div>
                          </div>
                        </div>
                        <div class="form-group row">
                          <div class="col-md-6">
                            <label for="postal_zip" class="text-black">Postal / Zip <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="postal_zip" name="postal_zip">
                            <div class="error-message"></div>
                          </div>
                          <div class="col-md-6">
                            <label for="c_phone" class="text-black">Phone <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="c_phone" name="c_phone" placeholder="Alternative Phone Number">
                            <div class="error-message"></div>
                          </div>
                        </div>
                        <hr>
                        <button type="submit" class="btn btn-primary">Save</button>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
              <hr />
                <div class="form-group row">
                  <!--edit address section-->
                  {% csrf_token %}
                  {% for address in addressess %}
                  <div class="card" style="border-color: black; border-radius: 10px;">
                      <h5 class="card-header">Address {{ forloop.counter }}</h5>
                      <div class="card-body">
                          <h5 class="card-title">{{address.first_name}} {{address.last_name}}</h5>
                          <p class="card-text">{{address.street_address}}, {{address.city}}, {{address.landmark}}, {{address.state}}-{{address.pin_code}}<br>
                              {{address.country}}<br>
                              {{address.phone}}
                          </p>
                      </div>
                      <div>
                          <a href="{% url 'del_address' address.id %}" class="text-danger" style="margin-right: 20px; margin-left: 20px;"><i class="fas fa-trash fa-lg"></i></a>
                          <a href="{% url 'edit_address' address.id %}" class="text-warning" data-bs-toggle="modal" data-bs-target="#editAddressModal{{ address.id }}"><i class="fas fa-pencil-alt"></i></a>
                      </div>
                  </div>
                  <!-- edit address modal -->
                  <div class="modal fade" id="editAddressModal{{ address.id }}" tabindex="-1" aria-labelledby="editAddressModalLabel{{ address.id }}" aria-hidden="true">
                      <div class="modal-dialog modal-dialog-centered">
                          <div class="modal-content">
                              <div class="modal-header">
                                  <h5 class="modal-title" id="editAddressModalLabel{{ address.id }}">Edit Address</h5>
                                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                              </div>
                              <div class="modal-body">
                                  <form id="editAddressForm {{ address.id }}" method="POST" action="{% url 'edit_address' address.id %}">
                                      {% csrf_token %}
                                      <div class="form-group row">
                                          <div class="col-md-6">
                                              <label for="fname" class="text-black">First Name <span class="text-danger">*</span></label>
                                              <input type="text" class="form-control" id="fname{{ address.id }}" name="fname" value="{{ address.first_name }}">
                                              <div class="error-message"></div>
                                          </div>
                                          <div class="col-md-6">
                                              <label for="lname" class="text-black">Last Name <span class="text-danger">*</span></label>
                                              <input type="text" class="form-control" id="lname{{ address.id }}" name="lname" value="{{ address.last_name }}">
                                              <div class="error-message"></div>
                                          </div>
                                      </div>
                                      <div class="form-group row">
                                          <div class="col-md-12">
                                              <label for="c_address" class="text-black">Address <span class="text-danger">*</span></label>
                                              <textarea class="form-control" name="c_address" id="c_address{{ address.id }}" rows="2" placeholder="Street address">{{ address.street_address }}</textarea>
                                              <div class="error-message"></div>
                                          </div>
                                      </div>
                                      <div class="form-group row">
                                          <div class="col-md-12">
                                              <label for="c_city" class="text-black">City <span class="text-danger">*</span></label>
                                              <input type="text" class="form-control" id="c_city{{ address.id }}" name="city" placeholder="City" value="{{ address.city }}">
                                              <div class="error-message"></div>
                                          </div>
                                      </div>
                                      <div class="form-group row">
                                          <div class="col-md-12">
                                              <label for="c_landmark" class="text-black">Landmark <span class="text-danger">*</span></label>
                                              <input type="text" class="form-control" id="c_landmark{{ address.id }}" name="landmark" placeholder="Landmark" value="{{ address.landmark }}">
                                              <div class="error-message"></div>
                                          </div>
                                      </div>
                                      <div class="form-group row">
                                          <div class="col-md-6">
                                              <label for="country" class="text-black">Country <span class="text-danger">*</span></label>
                                              <input type="text" class="form-control" id="country{{ address.id }}" name="country" value="{{ address.country }}">
                                              <div class="error-message"></div>
                                          </div>
                                          <div class="col-md-6">
                                              <label for="state" class="text-black">State <span class="text-danger">*</span></label>
                                              <input type="text" class="form-control" id="state{{ address.id }}" name="state" value="{{ address.state }}">
                                              <div class="error-message"></div>
                                          </div>
                                      </div>
                                      <div class="form-group row">
                                          <div class="col-md-6">
                                              <label for="postal_zip" class="text-black">Postal / Zip <span class="text-danger">*</span></label>
                                              <input type="text" class="form-control" id="postal_zip{{ address.id }}" name="postal_zip" value="{{ address.pin_code }}">
                                              <div class="error-message"></div>
                                          </div>
                                          <div class="col-md-6">
                                              <label for="c_phone" class="text-black">Phone <span class="text-danger">*</span></label>
                                              <input type="text" class="form-control" id="c_phone{{ address.id }}" name="c_phone" placeholder="Alternative Phone Number" value="{{ address.phone }}">
                                              <div class="error-message"></div>
                                          </div>
                                      </div>
                                      <hr>
                                      <button type="submit" class="btn btn-primary">Save changes</button>
                                  </form>
                              </div>
                          </div>
                      </div>
                  </div>
                  {% endfor %}
                </div>
            </div>
            <!--end edit address sextion-->
            <!--end manage address section-->
            
             <!-- security settings -->
            <div class="tab-pane" id="security">
              <h6>SECURITY SETTINGS</h6>
              <hr />
                <form>
                {% csrf_token %}
                  <div class="form-group">
                    <label class="d-block">Change Password</label>
                    <input type="password" id="old_pass"  class="form-control" placeholder="Enter your current password" />
                    <input type="password" id="new_pass" class="form-control mt-1" placeholder="New password" />
                    <input type="password" id="cnf_new_pass"  class="form-control mt-1" placeholder="Confirm new password" />
                  </div>
                <hr />
                <button type="button" onclick="changePassword()" class="btn btn-primary">Reset</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <!--change profile informations-->
  <script>
    $(document).ready(function () {
        $('#editDetailsForm').on('submit', function (e) {
            e.preventDefault();
            var form = $(this);
            var firstName = $('#firstName').val().trim();
            var lastName = $('#lastName').val().trim();
            var phone = $('#phone').val().trim();

            var isValid = true;

            if (firstName.length < 4) {
                $('#firstName').siblings('.error-message').addClass('error').text('Minimum 4 characters required');
                isValid = false;
            } else {
                $('#firstName').siblings('.error-message').removeClass('error').text('');
            }

            if (lastName.length < 4) {
                $('#lastName').siblings('.error-message').addClass('error').text('Minimum 4 characters required');
                isValid = false;
            } else {
                $('#lastName').siblings('.error-message').removeClass('error').text('');
            }

            if (!$.isNumeric(phone) || phone.length !== 10) {
                $('#phone').siblings('.error-message').addClass('error').text('Enter a valid Phone number (10 digits)');
                isValid = false;
            } else {
                $('#phone').siblings('.error-message').removeClass('error').text('');
            }

            if (!isValid) {
                return false;
            }

            $.ajax({
                type: 'POST',
                url: form.attr('action'),
                data: form.serialize(),
                success: function (response) {
                  Swal.fire({
                    position: "top-center",
                    icon: "success",
                    title: 'Profile details updated successfully',
                    showConfirmButton: false,
                    timer: 1500
                    }).then(function() {
                        window.location.reload();
                    });
                }
                error: function (xhr, textStatus, errorThrown) {
                    console.log(xhr);
                    if (xhr.status === 400) {
                        var errors = xhr.responseJSON;
                        $.each(errors, function (key, value) {
                            $('#' + key).siblings('.error-message').addClass('error').text(value);
                        });
                    } else {
                        alert('Error occurred while submitting the form. Please try again.');
                    }
                }
            });
        });

        $('.form-control').focus(function () {
            $(this).siblings('.error-message').removeClass('error').text('');
        });
    });
</script>
  
  <!--change password validation-->
  <script>
    $(document).ready(function () {
        $('#editDetailsForm').on('submit', function (e) {
            e.preventDefault();
            var form = $(this);
            var firstName = $('#firstName').val().trim();
            var lastName = $('#lastName').val().trim();
            var phone = $('#phone').val().trim();

            var isValid = true;

            if (firstName.length < 4) {
                $('#firstName').siblings('.error-message').addClass('error').text('Minimum 4 characters required');
                isValid = false;
            } else {
                $('#firstName').siblings('.error-message').removeClass('error').text('');
            }

            if (lastName.length < 4) {
                $('#lastName').siblings('.error-message').addClass('error').text('Minimum 4 characters required');
                isValid = false;
            } else {
                $('#lastName').siblings('.error-message').removeClass('error').text('');
            }

            if (!$.isNumeric(phone) || phone.length !== 10) {
                $('#phone').siblings('.error-message').addClass('error').text('Enter a valid Phone number (10 digits)');
                isValid = false;
            } else {
                $('#phone').siblings('.error-message').removeClass('error').text('');
            }

            if (!isValid) {
                return false;
            }

            $.ajax({
                type: 'POST',
                url: form.attr('action'),
                data: form.serialize(),
                success: function (response) {
                    Swal.fire({
                        position: "top-center",
                        icon: "success",
                        title: 'Profile details updated successfully',
                        showConfirmButton: false,
                        timer: 1500
                    }).then(function() {
                        window.location.reload();
                    });
                },
                error: function (xhr, textStatus, errorThrown) {
                    console.log(xhr);
                    if (xhr.status === 400) {
                        var errors = xhr.responseJSON;
                        $.each(errors, function (key, value) {
                            $('#' + key).siblings('.error-message').addClass('error').text(value[0]);
                        });
                    } else {
                        alert('Error occurred while submitting the form. Please try again.');
                    }
                }
            });
        });

        $('.form-control').focus(function () {
            $(this).siblings('.error-message').removeClass('error').text('');
        });
    });
</script>
  <!--add address validation-->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
  <script>
    $(document).ready(function () {
      $('#addAddressForm').on('submit', function (e) {
        e.preventDefault();
        var form = $(this);
        var fname = $('#fname').val().trim();
        var lname = $('#lname').val().trim();
        var c_address = $('#c_address').val().trim();
        var city = $('#c_city').val().trim();
        var landmark = $('#c_landmark').val().trim();
        var country = $('#country').val().trim();
        var state = $('#state').val().trim();
        var postal_zip = $('#postal_zip').val().trim();
        var c_phone = $('#c_phone').val().trim();
        var isValid = true;
  
        if (fname.length < 4) {
          $('#fname').siblings('.error-message').addClass('error').text('Minimum 4 characters required');
          isValid = false;
        } else {
          $('#fname').siblings('.error-message').removeClass('error').text('');
        }
  
        if (lname.length < 4) {
          $('#lname').siblings('.error-message').addClass('error').text('Minimum 4 characters required');
          isValid = false;
        } else {
          $('#lname').siblings('.error-message').removeClass('error').text('');
        }
  
        if (c_address.length < 4) {
          $('#c_address').siblings('.error-message').addClass('error').text('Minimum 4 characters required');
          isValid = false;
        } else {
          $('#c_address').siblings('.error-message').removeClass('error').text('');
        }
  
        if (city.length < 4) {
          $('#c_city').siblings('.error-message').addClass('error').text('Minimum 4 characters required');
          isValid = false;
        } else {
          $('#c_city').siblings('.error-message').removeClass('error').text('');
        }
  
        if (landmark.length < 4) {
          $('#c_landmark').siblings('.error-message').addClass('error').text('Minimum 4 characters required');
          isValid = false;
        } else {
          $('#c_landmark').siblings('.error-message').removeClass('error').text('');
        }
  
        if (country.length < 4) {
          $('#country').siblings('.error-message').addClass('error').text('Minimum 4 characters required');
          isValid = false;
        } else {
          $('#country').siblings('.error-message').removeClass('error').text('');
        }
  
        if (state.length < 4) {
          $('#state').siblings('.error-message').addClass('error').text('Minimum 4 characters required');
          isValid = false;
        } else {
          $('#state').siblings('.error-message').removeClass('error').text('');
        }
  
        if (!$.isNumeric(postal_zip) || postal_zip.length !== 6) {
          $('#postal_zip').siblings('.error-message').addClass('error').text('Enter a valid Postal / Zip code (6 digits)');
          isValid = false;
        } else {
          $('#postal_zip').siblings('.error-message').removeClass('error').text('');
        }
  
        if (!$.isNumeric(c_phone) || c_phone.length !== 10) {
          $('#c_phone').siblings('.error-message').addClass('error').text('Enter a valid Phone number (10 digits)');
          isValid = false;
        } else {
          $('#c_phone').siblings('.error-message').removeClass('error').text('');
        }
  
        if (!isValid) {
          return false;
        }
  
        $.ajax({
          type: 'POST',
          url: form.attr('action'),
          data: form.serialize(),
          success: function (response) {
            Swal.fire({
              position: "top-center",
              icon: "success",
              title: 'Address added successfully',
              showConfirmButton: false,
              timer: 1500
            }).then(function() {
              window.location.reload();
            });
          },
          error: function (xhr, textStatus, errorThrown) {
            console.log(xhr);
            alert('Error occurred while submitting the form. Please try again.');
          }
        });
      });
  
      $('.form-control').focus(function () {
        $(this).siblings('.error-message').removeClass('error').text('');
      });
    });
  </script>

<!--edit address validation-->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
<script>
  $(document).ready(function () {
    $('#editAddressForm').on('submit', function (e) {
      e.preventDefault();
      var form = $(this);
      var fname = $('#fname').val().trim();
      var lname = $('#lname').val().trim();
      var c_address = $('#c_address').val().trim();
      var city = $('#c_city').val().trim();
      var landmark = $('#c_landmark').val().trim();
      var country = $('#country').val().trim();
      var state = $('#state').val().trim();
      var postal_zip = $('#postal_zip').val().trim();
      var c_phone = $('#c_phone').val().trim();
      var isValid = true;

      if (fname.length < 4) {
        $('#fname').siblings('.error-message').addClass('error').text('Minimum 4 characters required');
        isValid = false;
      } else {
        $('#fname').siblings('.error-message').removeClass('error').text('');
      }

      if (lname.length < 4) {
        $('#lname').siblings('.error-message').addClass('error').text('Minimum 4 characters required');
        isValid = false;
      } else {
        $('#lname').siblings('.error-message').removeClass('error').text('');
      }

      if (c_address.length < 4) {
        $('#c_address').siblings('.error-message').addClass('error').text('Minimum 4 characters required');
        isValid = false;
      } else {
        $('#c_address').siblings('.error-message').removeClass('error').text('');
      }

      if (city.length < 4) {
        $('#c_city').siblings('.error-message').addClass('error').text('Minimum 4 characters required');
        isValid = false;
      } else {
        $('#c_city').siblings('.error-message').removeClass('error').text('');
      }

      if (landmark.length < 4) {
        $('#c_landmark').siblings('.error-message').addClass('error').text('Minimum 4 characters required');
        isValid = false;
      } else {
        $('#c_landmark').siblings('.error-message').removeClass('error').text('');
      }

      if (country.length < 4) {
        $('#country').siblings('.error-message').addClass('error').text('Minimum 4 characters required');
        isValid = false;
      } else {
        $('#country').siblings('.error-message').removeClass('error').text('');
      }

      if (state.length < 4) {
        $('#state').siblings('.error-message').addClass('error').text('Minimum 4 characters required');
        isValid = false;
      } else {
        $('#state').siblings('.error-message').removeClass('error').text('');
      }

      if (!$.isNumeric(postal_zip) || postal_zip.length !== 6) {
        $('#postal_zip').siblings('.error-message').addClass('error').text('Enter a valid Postal / Zip code (6 digits)');
        isValid = false;
      } else {
        $('#postal_zip').siblings('.error-message').removeClass('error').text('');
      }

      if (!$.isNumeric(c_phone) || c_phone.length !== 10) {
        $('#c_phone').siblings('.error-message').addClass('error').text('Enter a valid Phone number (10 digits)');
        isValid = false;
      } else {
        $('#c_phone').siblings('.error-message').removeClass('error').text('');
      }

      if (!isValid) {
        return false;
      }

      $.ajax({
        type: 'POST',
        url: form.attr('action'),
        data: form.serialize(),
        success: function (response) {
          Swal.fire({
            position: "top-center",
            icon: "success",
            title: 'Upaded successfully',
            showConfirmButton: false,
            timer: 1500
          }).then(function() {
            window.location.reload();
          });
        },
        error: function (xhr, textStatus, errorThrown) {
          console.log(xhr);
          alert('Error occurred while submitting the form. Please try again.');
        }
      });
    });

    $('.form-control').focus(function () {
      $(this).siblings('.error-message').removeClass('error').text('');
    });
  });
</script>

{% endblock %}
