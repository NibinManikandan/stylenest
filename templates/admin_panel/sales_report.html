{% extends "admin_panel/adm_base.html" %}
{% load static %}

{% block style %}
<title>Sales Reports</title>
<style>
    .dataTables_filter label{
        float:right;
    }
    .dataTables_paginate{
        float:right;
    }
    .card{
        font-size:13px;
    }
</style>
{%endblock%}
{% block content %}
<main id="main" class="main">
    <div class="content">
        <div class="animated fadeIn">
            <form action='' method='GET'>
                <div class="form-group row col-12" style="margin-bottom: 20px;">
                    <div class="col-sm-2 col-4">
                        <label for="salesStartDate" class="col-form-label" style="color: white;">From:</label>
                        <input type="date" class="form-control" name="from" id="salesStartDate">
                    </div>
                    
                    <div class="col-sm-2 col-4">
                        <label for="salesEndDate" class="col-form-label" style="color: white;">To:</label>
                        <input type="date" class="form-control" name="to" id="salesEndDate">
                    </div>
                    
                    <div class="col-sm-4 col-4 d-flex align-items-end">
                        <button type="submit" class="btn btn-primary ml-auto" id="submitSales">Filter</button>
                    </div>
                </div>
            </form>
            <div class="row">
                
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header">
                            <strong class="card-title">Sales Report</strong>
                            
                            <a href='../../pdf_download1/'><button type="button" class="btn btn-secondary float-right ml-2" style='font-size:12px;'>Download Pdf</button></a>
                            <a href="{%url 'download_exel1'%}"><button type="button" class="btn btn-secondary float-right" style='font-size:12px;'>Download Excel</button></a>
                        </div>
                        <div class="card-body">
                            <table id="bootstrap-data-table-1" class="table table-striped table-bordered">
                                <thead>
                                    <tr>
                                        <th>Order Id</th>
                                        <th>Ordered Date</th>
                                        <th>Expected Date</th>
                                        <th>Payment Method</th>
                                        <th>Products</th>
                                        <th>Price</th>
                                        <th>Payment Status</th>
                                        <th>Order Detail</th>

                                    </tr>
                                </thead>
                                <tbody>
                                    {% for i in sales%}
                                    <tr>
                                        <td>{{i.order_id|upper}}</td>
                                        <td>{{i.order_date}}</td>
                                        <td>{{i.expected_date}}</td>
                                        <td>{{i.pyment_mode}}</td>
                                        <td>{% for j in i.order_items.all%}{{j.ord_product.Pro_name}}<br><br>{%endfor%}</td>     
                                        <td>{% for j in i.order_items.all%}₹{{j.price}}<br><br>{%endfor%}</td>                                    
                                        <td>{% for j in i.order_items.all%}{{j.payment_status}}<br><br>{%endfor%}</td>
                                        <td>{% for j in i.order_items.all%}{{j.status}}<br><br>{%endfor%}</td>
                                    </tr>
                                    {%endfor%}
                                </tbody>
                            </table>
                        </div>
                            

                    </div>
                </div>

                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header" >
                            <strong class="card-title">Stock Report</strong>
                            
                            <a href='../../pdf_download2/'><button type="button" class="btn btn-secondary float-right ml-2" style='font-size:12px;'>Download stock report</button></a>
                            <a href="{%url 'download_exel2'%}"><button type="button" class="btn btn-secondary float-right" style='font-size:12px;'>Excel stock report</button></a>

                        </div>
                        <div class="card-body">
                            <table id="bootstrap-data-table-2" class="table table-striped table-bordered">
                                <thead>
                                    <tr>
                                        <th>Product Name</th>
                                        <th>Category</th>
                                        <th>Current Price</th>
                                        <th>Stock</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for i in stock %}
                                    <tr>
                                        <td>{{i.Pro_name|title}}</td>
                                        <td>{{i.category.C_name|title}}</td>
                                        <td>₹{{i.Pro_price}}<br><br></td>
                                        <td>{{i.stock}}<br><br></td>
                                    </tr>
                                    {%endfor%}
                                </tbody>
                            </table>

                        </div>
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header">
                            <strong class="card-title">Cancel Report</strong>
                            
                            <a href='../../pdf_download3/'><button type="button" class="btn btn-secondary float-right ml-2" style='font-size:12px;'>Download cancel report</button></a>
                            <a href="{%url 'download_exel3'%}"><button type="button" class="btn btn-secondary float-right" style='font-size:12px;'>Excel cancel report</button></a>

                        </div>
                        <div class="card-body">
                            <table id="bootstrap-data-table-3" class="table table-striped table-bordered">
                                <thead>
                                    <tr>
                                        <th>Order Id</th>
                                        <th>Ordered Date</th>
                                        <th>Payment Method</th>
                                        <th>Products</th>
                                        <th>Price</th>
                                        <th>Payment Status</th>
                                        <th>Order Detail</th>

                                    </tr>
                                </thead>
                                <tbody>
                                    {% for i in cancelled%}
                                    <tr>
                                        <td>{{i.order_id|upper}}</td>
                                        <td>{{i.order_date}}</td>
                                        <td>{{i.pyment_mode}}</td>
                                        <td>{% for j in i.order_items.all%}{{j.ord_product.Pro_name}}<br>{%endfor%}</td>     
                                        <td>{% for j in i.order_items.all%}₹{{j.price}}<br><br>{%endfor%}</td>                                    
                                        <td>{% for j in i.order_items.all%}{{j.payment_status}}<br><br>{%endfor%}</td>
                                        <td>{% for j in i.order_items.all%}{{j.status}}<br><br>{%endfor%}</td>
                                    </tr>
                                    {%endfor%}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

            </div>
        

        </div>
    </div>
</main>

    <script>
        $(document).ready(function() {
            // Initialize first table
            $('#bootstrap-data-table-1').DataTable();
    
            // Initialize second table
            $('#bootstrap-data-table-2').DataTable();
            $('#bootstrap-data-table-3').DataTable();
        });
    </script>
    
    
{% endblock %}